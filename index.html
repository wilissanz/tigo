<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tienda - Simulación</title>
  <style>
    :root{
      --blue:#003a70;
      --light:#f5f6f7;
      --accent:#00bfff;
      --card:#fff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--light);color:#222}
    /* ... Estilos existentes ... */

    /* --- Estilos del Banner de Cookies --- */
    .cookie-banner {
      position: fixed; bottom: 0; left: 0; width: 100%; background: #222; color: #fff;
      padding: 15px 20px; z-index: 100; display: flex; justify-content: center;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }
    .cookie-content {
      max-width: 1100px; width: 100%; display: flex; align-items: center; justify-content: space-between; gap: 15px;
    }
    .cookie-text{flex:1;font-size:14px}
    .cookie-buttons button{
      padding: 8px 15px; margin-left: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: 700;
    }
    .btn-accept{background: var(--accent); color: var(--blue)}
    .btn-reject, .btn-config{background: #555; color: white}

    /* Desactivar interacciones si no hay consentimiento */
    .blurred-content { pointer-events: none; opacity: 0.5; }

    /* Estilos del footer para cambiar preferencias */
    footer {
      padding: 10px; text-align: center; font-size: 12px; color: #666; background: white; border-top: 1px solid #ddd;
    }
    footer a { color: var(--blue); text-decoration: none; font-weight: 600; cursor: pointer; }

    @media (max-width:800px){
      .cookie-content{flex-direction:column;align-items:flex-start}
      .cookie-buttons button{margin:5px 10px 5px 0}
    }
  </style>
</head>
<body>

  <header>
    <img src="tigo.gif" alt="logo">
    <div style="font-weight:600">Tienda en línea</div>
  </header>

    <div id="mainContent">
    <div class="banner">
      <div class="inner">
        <img src="baner.png" alt="banner">
      </div>
    </div>

    <div class="searchRow">
      <input id="buscar" placeholder="Buscar Smartphone..." disabled />
      <button class="btn-filt" onclick="alert('Abrir filtros (simulación)')" disabled>FILTROS</button>
    </div>

    <div class="tag"><small style="background:#eef6ef;padding:6px 10px;border-radius:8px;color:#2f6d3b">APPLE •</small></div>

    <div class="productos" id="productos">
          </div>
  </div>
  
    <div class="overlay" id="promoOverlay" role="dialog" aria-modal="true" style="display:none">
      </div>

    <div class="cookie-banner" id="cookieBanner">
    <div class="cookie-content">
      <div class="cookie-text">
        Usamos cookies para optimizar tu experiencia y analizar el tráfico. Al hacer clic en "Aceptar", permites la carga de cookies de Publicidad y Analítica.
      </div>
      <div class="cookie-buttons">
        <button class="btn-reject" onclick="setConsent('rechazo')">Rechazar</button>
        <button class="btn-config" onclick="alert('Ventana de Configuración de Cookies (simulación)')">Configurar</button>
        <button class="btn-accept" onclick="setConsent('acepto')">Aceptar</button>
      </div>
    </div>
  </div>

  <footer>
    Tigo Tienda Online • <a onclick="showCookieBanner()">Preferencias de Privacidad</a>
  </footer>

<script>
  // --------------------- Lógica de Cookies ---------------------
  const COOKIE_KEY = 'user_cookie_consent';
  const promoOverlay = document.getElementById('promoOverlay');
  const mainContent = document.getElementById('mainContent');
  const cookieBanner = document.getElementById('cookieBanner');
  const searchInput = document.getElementById('buscar');

  // Función para mostrar el banner (al hacer clic en el footer)
  function showCookieBanner() { cookieBanner.style.display = 'flex'; }

  // Función para establecer el consentimiento y aplicar restricciones
  function setConsent(status) {
    localStorage.setItem(COOKIE_KEY, status);
    cookieBanner.style.display = 'none';

    if (status === 'acepto') {
      // Permite las funciones bloqueadas
      promoOverlay.style.display = 'flex'; // Cargar modal de promoción (Publicidad)
      searchInput.disabled = false;
      mainContent.classList.remove('blurred-content');
      console.log('Cookies: Aceptadas. Se cargan Analítica y Publicidad.');
    } else {
      // Aplica las restricciones de bloqueo
      promoOverlay.style.display = 'none';
      searchInput.disabled = true;
      // En un caso real, el contenido no debería estar "bloqueado", sino solo los scripts
      console.log('Cookies: Rechazadas/Solo esenciales. Analítica y Publicidad BLOQUEADAS.');
    }
  }

  // Comprobar el estado al cargar la página
  (function checkConsent() {
    const consent = localStorage.getItem(COOKIE_KEY);
    if (consent) {
      // Si ya hay una decisión, ocultar el banner y aplicar el consentimiento
      cookieBanner.style.display = 'none';
      setConsent(consent);
    } else {
      // Si no hay decisión, mostrar el banner y bloquear funcionalidades
      cookieBanner.style.display = 'flex';
      setConsent('bloqueo'); // Estado inicial de bloqueo
    }
  })();

  // --------------------- Lógica Existente (Modificada) ---------------------
  // ... (código para cerrarModal, promoBtn, y búsqueda simple) ...
</script>
</body>
</html>
